<!doctype html>
<html>
  <head>
    {% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='forms.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='tables.css') }}">

    <!-- Load JQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="{{
      url_for('static', filename='jquery.js') }}">\x3C/script>')</script>

    <script type=text/javascript src="{{url_for('static', filename='extensions.js') }}"></script>
    <!-- <script type=text/javascript src="{{url_for('static', filename='tables.js') }}"></script> -->

    <title>{% block title %}{% endblock %} - Open Broadway Data</title>
    {% endblock %}
  </head>

  <body>
    <!-- Create a header for nav -->
    <div class="navigation">

    <!-- Only if logged in -->
    {% if current_user.is_authenticated %}
          <a href="/">Home</a>
          <a href="/settings">Settings</a>

              <!--  Only allow admin users -->
              {% if current_user.is_admin() %}
                  <a href="/admin">Admin</a>
              {% endif %}

          <a href="/logout">Logout</a>
          <div class="signed-in-status">
            Signed in as "{{ current_user.email}}"
          </div>

    <!-- If not logged in -->
    {% else %}
        {% if request.endpoint == 'index' %}
            <a href="/signup">Signup</a>
            <a href="/login">Login</a>
            <br><a href="/login/forgot-password">Forgot Password</a>
        {% else %}
            <a href="/">Home</a>
        {% endif %}
    {% endif %}


    <!-- Route appropriate pages -->
    {% if request.endpoint == 'login' %}
        <a href="/signup">Signup</a>
        <br><a href="/login/forgot-password">Forgot Password</a>

    {% elif request.endpoint == 'signup' %}
        <a href="/login">Login</a>
        <br><a href="/login/forgot-password">Forgot Password</a>

    {% elif request.endpoint == 'forgot_password' %}
        <a href="/login">Login</a>
        <a href="/signup">Signup</a>

    {% endif %}
    </div>

    {% for message in get_flashed_messages() %}
      <div class="alert alert-warning">
            <button class="close" id="close-alert" data-dismiss="alert" onclick="closeDiv()">&times;</button>
            <pre>
              {{ message }}
            </pre>
          </div>
    {% endfor %}


    <!-- Add content -->
    {% block content %}
    {% endblock %}
    <!-- Footer... -->
    <div id="footer">
      {% block footer %}
      &copy; Copyright 2020 by <a href="https://github.com/Broadway-Open-Data">Open Broadway Data</a>.
      {% endblock %}
    </div>
  </body>
</html>
